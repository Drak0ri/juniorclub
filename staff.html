<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Junior Club – Staff</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --navy:#102d69;
  --bg:#f6f8fb;
  --border:#d0d7e2;
  --warn:#fff7b2;
  --danger:#b00020;
  --ok:#0b6b2f;
}
body{ margin:0; font-family:"Open Sans",Arial,sans-serif; background:var(--bg); color:#102d69; }
header{ background:var(--navy); color:#fff; padding:14px 18px; display:flex; justify-content:space-between; align-items:center; }
header input{ padding:6px 8px; border-radius:6px; border:none; }
button{ background:var(--navy); color:#fff; border:none; padding:6px 10px; border-radius:6px; font-weight:700; cursor:pointer; }
button.secondary{ background:#fff; color:var(--navy); border:1px solid var(--border); }
main{ max-width:1200px; margin:20px auto; padding:0 16px; }
.card{ background:#fff; border:1px solid var(--border); border-radius:12px; padding:16px; margin-bottom:16px; }
.big{ font-size:44px; font-weight:800; }
table{ width:100%; border-collapse:collapse; }
th,td{ padding:10px; border-bottom:1px solid var(--border); }
tr.unknown{ background:var(--warn); }

.tabs{ display:flex; gap:10px; margin-bottom:10px; }
.tabs button.active{
  background:#fff;
  color:var(--navy);
  border:1px solid var(--border);
}

.modal{ position:fixed; inset:0; background:rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; }
.modal-content{ background:#fff; width:420px; padding:16px; border-radius:12px; }
.modal-content label{ display:block; font-size:12px; font-weight:700; margin-top:10px; }
.modal-content input, .modal-content select{ width:100%; padding:6px; }
.error{ color:var(--danger); font-weight:700; font-size:13px; }
.success{ color:var(--ok); font-weight:700; font-size:13px; }
</style>
</head>

<body>

<header>
  <strong>Junior Club – Staff</strong>
  <div>
    <input id="operator" placeholder="staff email">
    <button onclick="saveOperator()">Save</button>
    <button class="secondary" onclick="reloadAll()">Refresh</button>
  </div>
</header>

<main>

<div class="tabs">
  <button id="tabPresent">Present</button>
  <button id="tabUnknown">Unknown Cards</button>
</div>

<div id="panelPresent">
  <div class="card">
    <h2>Currently Present</h2>
    <div class="big" id="presentCount">–</div>
  </div>
  <div class="card">
    <h2>Who’s Here Now</h2>
    <table>
      <thead>
        <tr><th>Name</th><th>Class</th><th>Time IN</th><th>Card</th><th>Action</th></tr>
      </thead>
      <tbody id="presentTable"></tbody>
    </table>
  </div>
</div>

<div id="panelUnknown" style="display:none;">
  <div class="card">
    <h2>Unknown Cards (Queue)</h2>
    <table>
      <thead>
        <tr><th>Time</th><th>Card</th><th>Device</th><th>Action</th></tr>
      </thead>
      <tbody id="unknownTable"></tbody>
    </table>
  </div>
</div>

</main>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h3>Register / Edit Student</h3>

    <label>Card UID (locked)</label>
    <input id="m_card" disabled>

    <label>Student name</label>
    <input id="m_name">

    <label>Student email</label>
    <input id="m_email">

    <label>Class</label>
    <input id="m_class">

    <label>Status</label>
    <select id="m_status">
      <option value="active">active</option>
      <option value="inactive">inactive</option>
    </select>

    <label>PIN (optional)</label>
    <input id="m_pin">

    <label>Note</label>
    <input id="m_note">

    <div id="modalError" class="error"></div>
    <div id="modalSuccess" class="success"></div>

    <div style="margin-top:12px;text-align:right">
      <button class="secondary" onclick="closeModal()">Cancel</button>
      <button onclick="submitMapping()">Save</button>
    </div>
  </div>
</div>

<script>
const tabPresent = document.getElementById("tabPresent");
const tabUnknown = document.getElementById("tabUnknown");
const panelPresent = document.getElementById("panelPresent");
const panelUnknown = document.getElementById("panelUnknown");

tabPresent.onclick = () => switchTab("present");
tabUnknown.onclick = () => switchTab("unknown");

function switchTab(which){
  panelPresent.style.display = which === "present" ? "" : "none";
  panelUnknown.style.display = which === "unknown" ? "" : "none";
  tabPresent.classList.toggle("active", which === "present");
  tabUnknown.classList.toggle("active", which === "unknown");
}

/* default tab */
switchTab("present");
</script>

</body>
</html>
